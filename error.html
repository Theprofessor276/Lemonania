<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Oops! Lemonania Error</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lemon&family=Lobster&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="Lemon.png">
  </head>
  <body>
    <div id="boc">
      <div id="lemonania-header"></div>
      <main style='text-align:center;'>
        <div id="errorMessage"></div>
        <img src="Errorlemon.png" alt='Working lemon' title="Lemon working hard" style="margin-top:1.5em;">
      </main>
      <p style="text-align: center;">
        <a class='retrybtn' href="index.html">Return Home</a><br>
        <a class='retrybtn' href="https://github.com/Theprofessor276/Lemonania/issues" target="_blank">Report an Issue</a>
      </p>
    </div>
    <script src="script.js"></script>
    <script>
      fetch('header.html')
        .then(r => r.text())
        .then(html => {
          document.getElementById('lemonania-header').innerHTML = html;
          if (typeof updateLemonPointsDisplay === "function") updateLemonPointsDisplay();
        });
      // General error message logic
      const params = new URLSearchParams(window.location.search);
      let message = "üçã <b>Oops! Something went wrong.</b><br>We encountered a problem, or you tried something forbidden.<br>";
      if(params.get('reason') === 'poppop') {
        message = "üçã <b>No one calls you that!</b><br><strong>The name 'pop pop' (or any variant) is forbidden by ancient Lemonania law.<br>Please choose a different username.</strong>";
      } else if(params.get('reason') === 'notfound') {
        message = "üçã <b>Page Not Found.</b><br>The page you were looking for doesn't exist.";
      } else if(params.get('reason')) {
        // Display the custom reason
        message = `<b>Error:</b> ${decodeURIComponent(params.get('reason'))}`;
      }
      document.getElementById('errorMessage').innerHTML = message;
    </script>
  </body>
</html>